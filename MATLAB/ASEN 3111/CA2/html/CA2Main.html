
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   <!--
This HTML was auto-generated from MATLAB code.
To make changes, update the MATLAB code and republish this document.
      --><title>CA2Main</title><meta name="generator" content="MATLAB 9.7"><link rel="schema.DC" href="http://purl.org/dc/elements/1.1/"><meta name="DC.date" content="2019-10-10"><meta name="DC.source" content="CA2Main.m"><style type="text/css">
html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,font,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td{margin:0;padding:0;border:0;outline:0;font-size:100%;vertical-align:baseline;background:transparent}body{line-height:1}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote:before,blockquote:after,q:before,q:after{content:'';content:none}:focus{outine:0}ins{text-decoration:none}del{text-decoration:line-through}table{border-collapse:collapse;border-spacing:0}

html { min-height:100%; margin-bottom:1px; }
html body { height:100%; margin:0px; font-family:Arial, Helvetica, sans-serif; font-size:10px; color:#000; line-height:140%; background:#fff none; overflow-y:scroll; }
html body td { vertical-align:top; text-align:left; }

h1 { padding:0px; margin:0px 0px 25px; font-family:Arial, Helvetica, sans-serif; font-size:1.5em; color:#d55000; line-height:100%; font-weight:normal; }
h2 { padding:0px; margin:0px 0px 8px; font-family:Arial, Helvetica, sans-serif; font-size:1.2em; color:#000; font-weight:bold; line-height:140%; border-bottom:1px solid #d6d4d4; display:block; }
h3 { padding:0px; margin:0px 0px 5px; font-family:Arial, Helvetica, sans-serif; font-size:1.1em; color:#000; font-weight:bold; line-height:140%; }

a { color:#005fce; text-decoration:none; }
a:hover { color:#005fce; text-decoration:underline; }
a:visited { color:#004aa0; text-decoration:none; }

p { padding:0px; margin:0px 0px 20px; }
img { padding:0px; margin:0px 0px 20px; border:none; }
p img, pre img, tt img, li img, h1 img, h2 img { margin-bottom:0px; } 

ul { padding:0px; margin:0px 0px 20px 23px; list-style:square; }
ul li { padding:0px; margin:0px 0px 7px 0px; }
ul li ul { padding:5px 0px 0px; margin:0px 0px 7px 23px; }
ul li ol li { list-style:decimal; }
ol { padding:0px; margin:0px 0px 20px 0px; list-style:decimal; }
ol li { padding:0px; margin:0px 0px 7px 23px; list-style-type:decimal; }
ol li ol { padding:5px 0px 0px; margin:0px 0px 7px 0px; }
ol li ol li { list-style-type:lower-alpha; }
ol li ul { padding-top:7px; }
ol li ul li { list-style:square; }

.content { font-size:1.2em; line-height:140%; padding: 20px; }

pre, code { font-size:12px; }
tt { font-size: 1.2em; }
pre { margin:0px 0px 20px; }
pre.codeinput { padding:10px; border:1px solid #d3d3d3; background:#f7f7f7; }
pre.codeoutput { padding:10px 11px; margin:0px 0px 20px; color:#4c4c4c; }
pre.error { color:red; }

@media print { pre.codeinput, pre.codeoutput { word-wrap:break-word; width:100%; } }

span.keyword { color:#0000FF }
span.comment { color:#228B22 }
span.string { color:#A020F0 }
span.untermstring { color:#B20000 }
span.syscmd { color:#B28C00 }

.footer { width:auto; padding:10px 0px; margin:25px 0px 0px; border-top:1px dotted #878787; font-size:0.8em; line-height:140%; font-style:italic; color:#878787; text-align:left; float:none; }
.footer p { margin:0px; }
.footer a { color:#878787; }
.footer a:hover { color:#878787; text-decoration:underline; }
.footer a:visited { color:#878787; }

table th { padding:7px 5px; text-align:left; vertical-align:middle; border: 1px solid #d6d4d4; font-weight:bold; }
table td { padding:7px 5px; text-align:left; vertical-align:top; border:1px solid #d6d4d4; }





  </style></head><body><div class="content"><h2>Contents</h2><div><ul><li><a href="#2">Visualizing The Flow With Given Values</a></li><li><a href="#3">Checking the effect of N on the accuracy of velocity and pressure</a></li><li><a href="#4">Studying the Effect of c, alpha, and V_inf</a></li><li><a href="#5">Functions Called</a></li></ul></div><pre class="codeinput">clear, clc, close <span class="string">all</span>

c = 2; <span class="comment">% m</span>
alpha = 12; <span class="comment">% degrees</span>
V_inf = 68; <span class="comment">% freestream velocity</span>
p_inf = 101.3e3; <span class="comment">% freestream pressure</span>
rho_inf = 1.225; <span class="comment">% freestream density</span>
plotting = true;
V = zeros(100,100,98);
P = zeros(100,100,98);
N = 1000;
fig = 1;
rows = 1;
row = 0;
</pre><h2 id="2">Visualizing The Flow With Given Values</h2><pre class="codeinput">name = <span class="string">'Flow with given values'</span>;
[Vactual,Pactual,fig] = Plot_Airfoil_Flow(c,alpha,V_inf,p_inf,rho_inf,N,plotting,fig,rows,row,name);
</pre><img vspace="5" hspace="5" src="CA2Main_01.png" alt=""> <h2 id="3">Checking the effect of N on the accuracy of velocity and pressure</h2><pre class="codeinput">close <span class="string">all</span>
plotting = false;
<span class="keyword">for</span> N = 3:100
    [V(:,:,N-2), P(:,:,N)] = Plot_Airfoil_Flow(c,alpha,V_inf,p_inf,rho_inf,N,plotting,rows,row,name);
<span class="keyword">end</span>

DV = zeros(98,1);
DP = zeros(98,1);
<span class="keyword">for</span> i = 1:98
    DV(i) = mean(abs(Vactual-V(:,:,i)),<span class="string">'all'</span>);
    DP(i) = mean(abs(Pactual-P(:,:,i)),<span class="string">'all'</span>);
<span class="keyword">end</span>
plotting = true;
N = 1000;
rows = 3;
row = 0;
name = <span class="string">'N = 1000'</span>;
Plot_Airfoil_Flow(c,alpha,V_inf,p_inf,rho_inf,N,plotting,fig,rows,row,name);
N = 50;
row = 3;
name = <span class="string">'N = 50'</span>;
Plot_Airfoil_Flow(c,alpha,V_inf,p_inf,rho_inf,N,plotting,fig,rows,row,name);
N = 10;
row = 6;
name = <span class="string">'N = 10'</span>;
[~,~,fig] = Plot_Airfoil_Flow(c,alpha,V_inf,p_inf,rho_inf,N,plotting,fig,rows,row,name);
figure
plot(3:100,DV)
title(<span class="string">'Average Velocity Error vs. No. Vorticies'</span>)
ylabel(<span class="string">'Velocity (m/s)'</span>)
xlabel(<span class="string">'N Vortices'</span>)
figure
plot(5:100,DP(3:end))
title(<span class="string">'Average Pressure Error vs. No. Vorticies'</span>)
ylabel(<span class="string">'Pressure (Pa)'</span>)
xlabel(<span class="string">'N Vortices'</span>)

fprintf([<span class="string">'Figure 2 shows that there is not a significant difference in\n'</span><span class="keyword">...</span>
<span class="string">'the velocity and pressure graphs in between N=50 and N=1000, but\n'</span><span class="keyword">...</span>
<span class="string">'there is a difference in the pressure contours. Figure 2 also shows that\n'</span><span class="keyword">...</span>
<span class="string">'N=10 has a very large difference in all three plots, and does not do a\n'</span><span class="keyword">...</span>
<span class="string">'good job of presenting the data. Figures 3 and 4 show how the average\n'</span><span class="keyword">...</span>
<span class="string">'velocity and pressure errors change with respect to N. As expected the\n'</span><span class="keyword">...</span>
<span class="string">'error decreases with an exponential decay.\n\n'</span>])
</pre><pre class="codeoutput">Figure 2 shows that there is not a significant difference in
the velocity and pressure graphs in between N=50 and N=1000, but
there is a difference in the pressure contours. Figure 2 also shows that
N=10 has a very large difference in all three plots, and does not do a
good job of presenting the data. Figures 3 and 4 show how the average
velocity and pressure errors change with respect to N. As expected the
error decreases with an exponential decay.

</pre><img vspace="5" hspace="5" src="CA2Main_02.png" alt=""> <img vspace="5" hspace="5" src="CA2Main_03.png" alt=""> <img vspace="5" hspace="5" src="CA2Main_04.png" alt=""> <h2 id="4">Studying the Effect of c, alpha, and V_inf</h2><pre class="codeinput">close <span class="string">all</span>
plotting = true;
N = 1000;
c = [1.5,2,2.5];
alpha = [6,12,18];
V_inf = [10,68,120];
rows = 3;
row = 0;
name = sprintf(<span class="string">'c = %1.1f'</span>,c(row/3+1));
Plot_Airfoil_Flow(c(row/3+1),alpha(2),V_inf(2),p_inf,rho_inf,N,plotting,fig,rows,row,name);
row = 3;
name = sprintf(<span class="string">'c = %1.1f'</span>,c(row/3+1));
Plot_Airfoil_Flow(c(row/3+1),alpha(2),V_inf(2),p_inf,rho_inf,N,plotting,fig,rows,row,name);
row = 6;
name = sprintf(<span class="string">'c = %1.1f'</span>,c(row/3+1));
[~,~,fig] = Plot_Airfoil_Flow(c(row/3+1),alpha(2),V_inf(2),p_inf,rho_inf,N,plotting,fig,rows,row,name);

row = 0;
name = sprintf(<span class="string">'alpha = %d'</span>,alpha(row/3+1));
Plot_Airfoil_Flow(c(2),alpha(row/3+1),V_inf(2),p_inf,rho_inf,N,plotting,fig,rows,row,name);
row = 3;
name = sprintf(<span class="string">'alpha = %d'</span>,alpha(row/3+1));
Plot_Airfoil_Flow(c(2),alpha(row/3+1),V_inf(2),p_inf,rho_inf,N,plotting,fig,rows,row,name);
row = 6;
name = sprintf(<span class="string">'alpha = %d'</span>,alpha(row/3+1));
[~,~,fig] = Plot_Airfoil_Flow(c(2),alpha(row/3+1),V_inf(2),p_inf,rho_inf,N,plotting,fig,rows,row,name);

row = 0;
name = sprintf(<span class="string">'V_{inf} = %d'</span>,V_inf(row/3+1));
Plot_Airfoil_Flow(c(2),alpha(2),V_inf(row/3+1),p_inf,rho_inf,N,plotting,fig,rows,row,name);
row = 3;
name = sprintf(<span class="string">'V_{inf} = %d'</span>,V_inf(row/3+1));
Plot_Airfoil_Flow(c(2),alpha(2),V_inf(row/3+1),p_inf,rho_inf,N,plotting,fig,rows,row,name);
row = 6;
name = sprintf(<span class="string">'V_{inf} = %d'</span>,V_inf(row/3+1));
[~,~,fig] = Plot_Airfoil_Flow(c(2),alpha(2),V_inf(row/3+1),p_inf,rho_inf,N,plotting,fig,rows,row,name);

fprintf([<span class="string">'The effects of c are slight but noticeable, There are changes\n'</span><span class="keyword">...</span>
<span class="string">'in all three plots but the most noticeable are in the stream lines and\n'</span><span class="keyword">...</span>
<span class="string">'pressure contours. The stream lines and pressure contours for the longer\n'</span><span class="keyword">...</span>
<span class="string">'chord generally have a little more separation between them.\n\n'</span>])
fprintf([<span class="string">'Angle of attack seems to have the most effect on the plots,\n'</span><span class="keyword">...</span>
<span class="string">'of course the differences in AOA are probably more significant than the\n'</span><span class="keyword">...</span>
<span class="string">'other permutations. Alpha completely changes the plots with an AOA of 18\n'</span><span class="keyword">...</span>
<span class="string">'the streamlines have significant separation and the pressure contours\n'</span><span class="keyword">...</span>
<span class="string">'mainly change color entirely.\n\n'</span>])
fprintf([<span class="string">'Free stream velocity seems to have the least effect on the\n'</span><span class="keyword">...</span>
<span class="string">'plots. I am not really able to tell the difference between the different\n'</span><span class="keyword">...</span>
<span class="string">'velocities.\n\n'</span>])
</pre><pre class="codeoutput">The effects of c are slight but noticeable, There are changes
in all three plots but the most noticeable are in the stream lines and
pressure contours. The stream lines and pressure contours for the longer
chord generally have a little more separation between them.

Angle of attack seems to have the most effect on the plots,
of course the differences in AOA are probably more significant than the
other permutations. Alpha completely changes the plots with an AOA of 18
the streamlines have significant separation and the pressure contours
mainly change color entirely.

Free stream velocity seems to have the least effect on the
plots. I am not really able to tell the difference between the different
velocities.

</pre><img vspace="5" hspace="5" src="CA2Main_05.png" alt=""> <img vspace="5" hspace="5" src="CA2Main_06.png" alt=""> <img vspace="5" hspace="5" src="CA2Main_07.png" alt=""> <h2 id="5">Functions Called</h2><p>The following functions were built and called as part of this assignment.</p><pre class="language-matlab">
<span class="keyword">function</span> [V,pressure,fig] = Plot_Airfoil_Flow(c,alpha,V_inf,p_inf,rho_inf,N,plots,fig,rows,row,name)
<span class="comment">%Plot_Airfoil_Flow plots the contour lines of a given flow</span>
<span class="comment">%   The flow is defined by the cord length(c), angle of attack(alpha), the</span>
<span class="comment">%   freestream velocity(V_inf), the freastream pressure(p_inf), the</span>
<span class="comment">%   freestream density(rho_inf), and the number of discrete vorticies(N)</span>

<span class="comment">%% Define Domain</span>
xmin=-3;
xmax=3;
ymin=-3;
ymax=3;

<span class="comment">%% Define Number of Grid Points</span>
nx=100; <span class="comment">% steps in the x direction</span>
ny=100; <span class="comment">% steps in the y direction</span>

[x,y]=meshgrid(linspace(xmin,xmax,nx),linspace(ymin,ymax,ny));

alpha = alpha*pi/180;

VorP = linspace(0,c,N);
VorP = VorP(2:end-1);
dx = c/N;

gammas = 2*alpha*V_inf*sqrt((1-VorP/c)./(VorP/c));

Gammas = gammas*dx;

<span class="comment">%% Stream and Potential Functions</span>

<span class="comment">% Uniform Flow</span>
u = V_inf*cos(alpha);
v = V_inf*sin(alpha);
psiU = u*y - v*x;
phiU = u*x + v*y;

<span class="comment">% Vortex Flow</span>
radius=@(x,y,x1,y1) sqrt((x-x1).^2+(y-y1).^2);
theta =@(x,y,x1,y1) atan2((y-y1),(x-x1));
psiV = zeros(nx,ny);
phiV = zeros(nx,ny);

<span class="keyword">for</span> i=1:numel(VorP)
    psiV = psiV + Gammas(i)./(2*pi).*log(radius(x,y,VorP(i),0));
    phiV = phiV - Gammas(i)./(2*pi).*theta(x,y,VorP(i),0);
<span class="keyword">end</span>

StreamFunction = psiV + psiU;
PotentialFunction = phiV + phiU;
<span class="comment">%% Determine color levels for contours</span>
levmin = StreamFunction(1,nx); <span class="comment">% defines the color levels -&gt; trial and error to find a good representation</span>
levmax = StreamFunction(ny,nx/2);
levels = linspace(levmin,levmax,80)';

<span class="keyword">if</span> plots == true
    figure(fig)
    set(gcf, <span class="string">'Position'</span>,  [200, 150, 1200, 250*rows])
    subplot(rows,3,1+row)
    hold <span class="string">on</span>
    contour(x,y,StreamFunction,levels)
    plot([0 c], [0 0])
    xlabel(<span class="string">'Stream Lines'</span>)
    
    subplot(rows,3,2+row)
    hold <span class="string">on</span>
    contour(x,y,PotentialFunction,levels)
    plot([0 c], [0 0])
    title(name)
    xlabel(<span class="string">'Equipotential Lines'</span>)
<span class="keyword">end</span>
<span class="comment">%% Velocity Functions</span>


V = gradient(PotentialFunction);
q_inf = 1/2*rho_inf*V_inf^2;
pressure = (1-(V./V_inf).^2)*q_inf+p_inf;

levmin = min(min(pressure)); <span class="comment">% defines the color levels -&gt; trial and error to find a good representation</span>
levmax = max(max(pressure));
levels = linspace(levmin,levmax,100)';

<span class="keyword">if</span> plots == true
    subplot(rows,3,3+row)
    hold <span class="string">on</span>
    contourf(x,y,pressure,levels)
    plot([0 c], [0 0])
    xlabel(<span class="string">'Pressure Contours'</span>)
    fig = fig+1;
<span class="keyword">end</span>
<span class="keyword">end</span>


</pre><p class="footer"><br><a href="https://www.mathworks.com/products/matlab/">Published with MATLAB&reg; R2019b</a><br></p></div><!--
##### SOURCE BEGIN #####
clear, clc, close all

c = 2; % m
alpha = 12; % degrees
V_inf = 68; % freestream velocity
p_inf = 101.3e3; % freestream pressure
rho_inf = 1.225; % freestream density
plotting = true;
V = zeros(100,100,98);
P = zeros(100,100,98);
N = 1000;
fig = 1;
rows = 1;
row = 0;
%% Visualizing The Flow With Given Values
name = 'Flow with given values';
[Vactual,Pactual,fig] = Plot_Airfoil_Flow(c,alpha,V_inf,p_inf,rho_inf,N,plotting,fig,rows,row,name);

%% Checking the effect of N on the accuracy of velocity and pressure
close all
plotting = false;
for N = 3:100
    [V(:,:,N-2), P(:,:,N)] = Plot_Airfoil_Flow(c,alpha,V_inf,p_inf,rho_inf,N,plotting,rows,row,name);
end

DV = zeros(98,1);
DP = zeros(98,1);
for i = 1:98
    DV(i) = mean(abs(Vactual-V(:,:,i)),'all');
    DP(i) = mean(abs(Pactual-P(:,:,i)),'all');
end
plotting = true;
N = 1000;
rows = 3;
row = 0;
name = 'N = 1000';
Plot_Airfoil_Flow(c,alpha,V_inf,p_inf,rho_inf,N,plotting,fig,rows,row,name);
N = 50;
row = 3;
name = 'N = 50';
Plot_Airfoil_Flow(c,alpha,V_inf,p_inf,rho_inf,N,plotting,fig,rows,row,name);
N = 10;
row = 6;
name = 'N = 10';
[~,~,fig] = Plot_Airfoil_Flow(c,alpha,V_inf,p_inf,rho_inf,N,plotting,fig,rows,row,name);
figure
plot(3:100,DV)
title('Average Velocity Error vs. No. Vorticies')
ylabel('Velocity (m/s)')
xlabel('N Vortices')
figure
plot(5:100,DP(3:end))
title('Average Pressure Error vs. No. Vorticies')
ylabel('Pressure (Pa)')
xlabel('N Vortices')

fprintf(['Figure 2 shows that there is not a significant difference in\n'...
'the velocity and pressure graphs in between N=50 and N=1000, but\n'...
'there is a difference in the pressure contours. Figure 2 also shows that\n'...
'N=10 has a very large difference in all three plots, and does not do a\n'...
'good job of presenting the data. Figures 3 and 4 show how the average\n'...
'velocity and pressure errors change with respect to N. As expected the\n'...
'error decreases with an exponential decay.\n\n'])
%% Studying the Effect of c, alpha, and V_inf
close all
plotting = true;
N = 1000;
c = [1.5,2,2.5];
alpha = [6,12,18];
V_inf = [10,68,120];
rows = 3;
row = 0;
name = sprintf('c = %1.1f',c(row/3+1));
Plot_Airfoil_Flow(c(row/3+1),alpha(2),V_inf(2),p_inf,rho_inf,N,plotting,fig,rows,row,name);
row = 3;
name = sprintf('c = %1.1f',c(row/3+1));
Plot_Airfoil_Flow(c(row/3+1),alpha(2),V_inf(2),p_inf,rho_inf,N,plotting,fig,rows,row,name);
row = 6;
name = sprintf('c = %1.1f',c(row/3+1));
[~,~,fig] = Plot_Airfoil_Flow(c(row/3+1),alpha(2),V_inf(2),p_inf,rho_inf,N,plotting,fig,rows,row,name);

row = 0;
name = sprintf('alpha = %d',alpha(row/3+1));
Plot_Airfoil_Flow(c(2),alpha(row/3+1),V_inf(2),p_inf,rho_inf,N,plotting,fig,rows,row,name);
row = 3;
name = sprintf('alpha = %d',alpha(row/3+1));
Plot_Airfoil_Flow(c(2),alpha(row/3+1),V_inf(2),p_inf,rho_inf,N,plotting,fig,rows,row,name);
row = 6;
name = sprintf('alpha = %d',alpha(row/3+1));
[~,~,fig] = Plot_Airfoil_Flow(c(2),alpha(row/3+1),V_inf(2),p_inf,rho_inf,N,plotting,fig,rows,row,name);

row = 0;
name = sprintf('V_{inf} = %d',V_inf(row/3+1));
Plot_Airfoil_Flow(c(2),alpha(2),V_inf(row/3+1),p_inf,rho_inf,N,plotting,fig,rows,row,name);
row = 3;
name = sprintf('V_{inf} = %d',V_inf(row/3+1));
Plot_Airfoil_Flow(c(2),alpha(2),V_inf(row/3+1),p_inf,rho_inf,N,plotting,fig,rows,row,name);
row = 6;
name = sprintf('V_{inf} = %d',V_inf(row/3+1));
[~,~,fig] = Plot_Airfoil_Flow(c(2),alpha(2),V_inf(row/3+1),p_inf,rho_inf,N,plotting,fig,rows,row,name);

fprintf(['The effects of c are slight but noticeable, There are changes\n'...
'in all three plots but the most noticeable are in the stream lines and\n'...
'pressure contours. The stream lines and pressure contours for the longer\n'...
'chord generally have a little more separation between them.\n\n'])
fprintf(['Angle of attack seems to have the most effect on the plots,\n'...
'of course the differences in AOA are probably more significant than the\n'...
'other permutations. Alpha completely changes the plots with an AOA of 18\n'...
'the streamlines have significant separation and the pressure contours\n'...
'mainly change color entirely.\n\n'])
fprintf(['Free stream velocity seems to have the least effect on the\n'...
'plots. I am not really able to tell the difference between the different\n'...
'velocities.\n\n'])


%% Functions Called
% The following functions were built and called as part of this assignment.
%
% <include>Plot_Airfoil_Flow.m</include>
##### SOURCE END #####
--></body></html>